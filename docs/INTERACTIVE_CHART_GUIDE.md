# äº¤äº’å¼å›¾è¡¨éƒ¨ç½²æŒ‡å—

## ğŸ“Š æ¦‚è¿°

ä½ çš„ COVID-19 ç›‘æµ‹æ•°æ®äº¤äº’å¼å›¾è¡¨å·²ç»å‡†å¤‡å°±ç»ªï¼è¿™ä»½æŒ‡å—å°†å¸®åŠ©ä½ å°†å®ƒéƒ¨ç½²åˆ° GitHub Pagesï¼Œè®©ä»»ä½•äººéƒ½èƒ½åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

1. âœ… åˆ›å»ºäº† `generate_interactive_plot.py` è„šæœ¬
2. âœ… ç”Ÿæˆäº†äº¤äº’å¼ HTML å›¾è¡¨ (`docs/covid19_interactive.html`)
3. âœ… åˆ›å»ºäº† GitHub Pages é…ç½®æ–‡ä»¶
4. âœ… åˆ›å»ºäº†è‡ªåŠ¨éƒ¨ç½²å·¥ä½œæµ (`.github/workflows/deploy-docs.yml`)
5. âœ… æ›´æ–°äº† READMEï¼Œæ·»åŠ äº†äº¤äº’å›¾è¡¨é“¾æ¥
6. âœ… åˆ›å»ºäº†æœ¬åœ°é¢„è§ˆè„šæœ¬ (`preview_interactive.sh`)

## ğŸ¯ å›¾è¡¨åŠŸèƒ½ç‰¹æ€§

ä½ çš„äº¤äº’å¼å›¾è¡¨åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š

- **ğŸ“ˆ åŒæŒ‡æ ‡å±•ç¤º**ï¼šåŒæ—¶æ˜¾ç¤º ILIï¼ˆæµæ„Ÿæ ·ç—…ä¾‹ï¼‰å’Œ SARIï¼ˆä¸¥é‡æ€¥æ€§å‘¼å¸é“æ„ŸæŸ“ï¼‰é˜³æ€§ç‡
- **ğŸ”„ å¤šçª—å£å¹³æ»‘**ï¼šå¯åˆ‡æ¢ 1å‘¨/3å‘¨/5å‘¨/7å‘¨ çš„ç§»åŠ¨å¹³å‡
- **ğŸ“… æ—¶é—´èŒƒå›´é€‰æ‹©**ï¼šå¿«é€Ÿé€‰æ‹©è¿‘4å‘¨ã€è¿‘13å‘¨ã€è¿‘6æœˆæˆ–å…¨éƒ¨æ•°æ®
- **ğŸ–±ï¸ äº¤äº’æ“ä½œ**ï¼š
  - ç¼©æ”¾ï¼šé¼ æ ‡æ»šè½®æˆ–æ¡†é€‰åŒºåŸŸ
  - å¹³ç§»ï¼šæ‹–åŠ¨å›¾è¡¨
  - æ‚¬åœï¼šæ˜¾ç¤ºç²¾ç¡®æ•°å€¼
  - é‡ç½®ï¼šåŒå‡»å›¾è¡¨æ¢å¤é»˜è®¤è§†å›¾
- **ğŸ’¾ å¯¼å‡ºåŠŸèƒ½**ï¼šå¯å¯¼å‡ºä¸ºé«˜åˆ†è¾¨ç‡ PNG å›¾ç‰‡
- **ğŸ“± å“åº”å¼è®¾è®¡**ï¼šè‡ªåŠ¨é€‚åº”ä¸åŒå±å¹•å°ºå¯¸

## ğŸš€ éƒ¨ç½²åˆ° GitHub Pages

### æ­¥éª¤ 1: æŸ¥çœ‹æœ¬åœ°é¢„è§ˆ

åœ¨æ¨é€åˆ° GitHub ä¹‹å‰ï¼Œå…ˆåœ¨æœ¬åœ°é¢„è§ˆå›¾è¡¨ï¼š

```bash
# æ–¹æ³• 1: ä½¿ç”¨é¢„è§ˆè„šæœ¬ï¼ˆä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼‰
./preview_interactive.sh

# æ–¹æ³• 2: æ‰‹åŠ¨ç”Ÿæˆå¹¶æ‰“å¼€
uv run python generate_interactive_plot.py
open docs/covid19_interactive.html  # macOS
# æˆ–åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­åŒå‡»æ‰“å¼€ docs/covid19_interactive.html
```

### æ­¥éª¤ 2: æ¨é€åˆ° GitHub

```bash
# æ·»åŠ æ‰€æœ‰æ–°æ–‡ä»¶
git add .

# æäº¤æ›´æ”¹
git commit -m "æ·»åŠ  COVID-19 ç›‘æµ‹æ•°æ®äº¤äº’å¼å›¾è¡¨å’Œ GitHub Pages é…ç½®"

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main
```

### æ­¥éª¤ 3: å¯ç”¨ GitHub Pages

1. æ‰“å¼€ä½ çš„ GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡»é¡¶éƒ¨çš„ **Settings** ï¼ˆè®¾ç½®ï¼‰æ ‡ç­¾
3. åœ¨å·¦ä¾§èœå•ä¸­æ‰¾åˆ° **Pages**
4. åœ¨ **Source** ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© `GitHub Actions`
5. ä¿å­˜è®¾ç½®

### æ­¥éª¤ 4: ç­‰å¾…éƒ¨ç½²å®Œæˆ

1. è¿›å…¥ä»“åº“çš„ **Actions** æ ‡ç­¾
2. ä½ ä¼šçœ‹åˆ° "éƒ¨ç½²äº¤äº’å¼å›¾è¡¨åˆ° GitHub Pages" å·¥ä½œæµæ­£åœ¨è¿è¡Œ
3. ç­‰å¾…å·¥ä½œæµå®Œæˆï¼ˆé€šå¸¸ 1-2 åˆ†é’Ÿï¼‰ï¼Œç›´åˆ°æ˜¾ç¤ºç»¿è‰²çš„ âœ“

### æ­¥éª¤ 5: è®¿é—®ä½ çš„äº¤äº’å¼å›¾è¡¨

éƒ¨ç½²æˆåŠŸåï¼Œä½ çš„å›¾è¡¨å°†åœ¨ä»¥ä¸‹åœ°å€å¯è®¿é—®ï¼š

```
https://<ä½ çš„GitHubç”¨æˆ·å>.github.io/<ä»“åº“å>/covid19_interactive.html
```

ä¾‹å¦‚ï¼š
- ç”¨æˆ·åï¼š`dailypartita`
- ä»“åº“åï¼š`cn_cdc_data`
- å®Œæ•´ URLï¼š`https://dailypartita.github.io/cn_cdc_data/covid19_interactive.html`

**è®°å¾—æ›´æ–° README ä¸­çš„é“¾æ¥ä¸ºä½ çš„å®é™… URLï¼**

## ğŸ”„ æ›´æ–°å›¾è¡¨æµç¨‹

å½“ä½ æœ‰æ–°çš„ç›‘æµ‹æ•°æ®æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤æ›´æ–°å›¾è¡¨ï¼š

```bash
# 1. æ›´æ–°æ•°æ®æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯é€šè¿‡è¿è¡Œæ•°æ®æå–è„šæœ¬ï¼‰
uv run python extract_surveillance_data.py ...

# 2. é‡æ–°ç”Ÿæˆäº¤äº’å¼å›¾è¡¨
uv run python generate_interactive_plot.py

# 3. æäº¤å¹¶æ¨é€æ›´æ”¹
git add covid_only_updated_surveillance_data.csv docs/covid19_interactive.html
git commit -m "æ›´æ–° $(date +%Y-%m-%d) ç›‘æµ‹æ•°æ®"
git push origin main

# 4. GitHub Actions ä¼šè‡ªåŠ¨é‡æ–°éƒ¨ç½²ï¼ˆæ— éœ€æ‰‹åŠ¨æ“ä½œï¼‰
```

## ğŸ“‚ æ–‡ä»¶ç»“æ„è¯´æ˜

```
cn_cdc_data/
â”œâ”€â”€ generate_interactive_plot.py    # ç”Ÿæˆäº¤äº’å›¾è¡¨çš„ä¸»è„šæœ¬
â”œâ”€â”€ preview_interactive.sh          # æœ¬åœ°é¢„è§ˆè„šæœ¬
â”œâ”€â”€ covid_only_updated_surveillance_data.csv  # æ•°æ®æº
â”œâ”€â”€ 
â”œâ”€â”€ docs/                           # GitHub Pages æ ¹ç›®å½•
â”‚   â”œâ”€â”€ covid19_interactive.html    # ä¸»äº¤äº’å›¾è¡¨
â”‚   â”œâ”€â”€ index.html                  # é¦–é¡µï¼ˆé‡å®šå‘åˆ°ä¸»å›¾è¡¨ï¼‰
â”‚   â””â”€â”€ SETUP.md                    # è¯¦ç»†è®¾ç½®æ–‡æ¡£
â”œâ”€â”€ 
â””â”€â”€ .github/workflows/
    â””â”€â”€ deploy-docs.yml             # è‡ªåŠ¨éƒ¨ç½²å·¥ä½œæµ
```

## ğŸ¨ è‡ªå®šä¹‰å›¾è¡¨

### ä¿®æ”¹é¢œè‰²å’Œæ ·å¼

ç¼–è¾‘ `generate_interactive_plot.py`ï¼Œåœ¨ `fig.add_trace()` éƒ¨åˆ†æ·»åŠ ï¼š

```python
fig.add_trace(go.Scatter(
    ...
    line=dict(color='#FF6B6B', width=3),  # è‡ªå®šä¹‰é¢œè‰²å’Œçº¿å®½
    marker=dict(size=8, color='#4ECDC4')  # è‡ªå®šä¹‰æ ‡è®°
))
```

### æ·»åŠ æ›´å¤šå¹³æ»‘çª—å£

ä¿®æ”¹ `windows` åˆ—è¡¨ï¼š

```python
windows = [1, 2, 3, 5, 7, 14, 21]  # æ·»åŠ 2å‘¨ã€14å‘¨ã€21å‘¨é€‰é¡¹
```

### æ›´æ”¹å›¾è¡¨å°ºå¯¸

ä¿®æ”¹ `update_layout()` ä¸­çš„ `height` å‚æ•°ï¼š

```python
fig.update_layout(
    height=800,  # é»˜è®¤æ˜¯ 600
    ...
)
```

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šGitHub Actions éƒ¨ç½²å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
- Pages æœªå¯ç”¨
- å·¥ä½œæµæƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ Settings â†’ Pages æ˜¯å¦é€‰æ‹©äº† "GitHub Actions"
2. æ£€æŸ¥ Settings â†’ Actions â†’ General â†’ Workflow permissions
   - é€‰æ‹© "Read and write permissions"
   - å‹¾é€‰ "Allow GitHub Actions to create and approve pull requests"

### é—®é¢˜ 2ï¼šå›¾è¡¨æ˜¾ç¤ºç©ºç™½æˆ–é”™è¯¯

**å¯èƒ½åŸå› ï¼š**
- æ•°æ®æ–‡ä»¶æ ¼å¼é—®é¢˜
- Plotly åº“ç‰ˆæœ¬ä¸å…¼å®¹

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æ•°æ®æ–‡ä»¶
head -n 10 covid_only_updated_surveillance_data.csv

# é‡æ–°ç”Ÿæˆå›¾è¡¨
rm docs/covid19_interactive.html
uv run python generate_interactive_plot.py

# æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶
ls -lh docs/covid19_interactive.html
```

### é—®é¢˜ 3ï¼šé“¾æ¥æ— æ³•è®¿é—®ï¼ˆ404ï¼‰

**å¯èƒ½åŸå› ï¼š**
- GitHub Pages æœªå®Œå…¨éƒ¨ç½²
- URL æ‹¼å†™é”™è¯¯

**è§£å†³æ–¹æ¡ˆï¼š**
1. ç­‰å¾… 5-10 åˆ†é’Ÿè®© DNS ä¼ æ’­
2. ç¡®è®¤ URL æ ¼å¼ï¼š`https://ç”¨æˆ·å.github.io/ä»“åº“å/covid19_interactive.html`
3. æ£€æŸ¥ Actions æ ‡ç­¾ç¡®è®¤éƒ¨ç½²æˆåŠŸ
4. å°è¯•è®¿é—® `https://ç”¨æˆ·å.github.io/ä»“åº“å/` æŸ¥çœ‹æ˜¯å¦èƒ½é‡å®šå‘

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸæ›´æ–°**ï¼šå»ºè®®æ¯å‘¨æ›´æ–°ä¸€æ¬¡æ•°æ®å’Œå›¾è¡¨
2. **å¤‡ä»½æ•°æ®**ï¼šåœ¨ git ä¸­ä¿ç•™å†å²æ•°æ®æ–‡ä»¶
3. **ç‰ˆæœ¬æ ‡æ³¨**ï¼šåœ¨æäº¤ä¿¡æ¯ä¸­åŒ…å«æ—¥æœŸï¼Œä¾¿äºè¿½è¸ª
4. **æµ‹è¯•éªŒè¯**ï¼šæ¯æ¬¡æ›´æ–°ååœ¨æœ¬åœ°é¢„è§ˆï¼Œç¡®è®¤æ— è¯¯å†æ¨é€
5. **æ–‡æ¡£åŒæ­¥**ï¼šä¿æŒ README å’Œå®é™…é“¾æ¥ä¸€è‡´

## ğŸ“š ç›¸å…³èµ„æº

- **Plotly æ–‡æ¡£**: https://plotly.com/python/
- **GitHub Pages æ–‡æ¡£**: https://docs.github.com/en/pages
- **GitHub Actions æ–‡æ¡£**: https://docs.github.com/en/actions
- **è¯¦ç»†è®¾ç½®æŒ‡å—**: [docs/SETUP.md](docs/SETUP.md)

## ğŸ‰ å®Œæˆï¼

æ­å–œï¼ä½ ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„äº¤äº’å¼ COVID-19 ç›‘æµ‹æ•°æ®å¯è§†åŒ–å¹³å°ï¼Œå¯ä»¥ä¸ä»»ä½•äººåˆ†äº«ï¼Œè€Œä¸”ä¼šéšç€ä½ çš„æ•°æ®æ›´æ–°è‡ªåŠ¨åŒæ­¥ã€‚

---

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ [docs/SETUP.md](docs/SETUP.md) è·å–æ›´è¯¦ç»†çš„è¯´æ˜ï¼Œæˆ–æäº¤ GitHub Issueã€‚

